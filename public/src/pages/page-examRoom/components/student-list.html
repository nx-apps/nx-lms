
<dom-module id="student-list">
    <template>
        <style include="page-style">
            tbody>tr>td{
                 cursor: pointer;
            }
            tbody>tr:hover{
                font-weight: bold;
                border-bottom: 2px solid dodgerblue;
            }
        </style>
        <div class="container">
            <paper-material elevation="1">
                <table class="gl-table-default">
                    <thead>
                        <tr>
                            <th style="width: 10%">#</th>
                            <th>ชื่อ-สกุล</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template is="dom-repeat" items="{{data}}" filter="{{computeFilter(active)}}">
                            <tr>
                                <td>
                                    <iron-icon icon="[[icon]]" index="[[index]]" item="[[item]]" on-tap="controller"></iron-icon>
                                </td>
                                <td>
                                    [[item.name]]
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </paper-material>
        </div>
    </template>
    <script>
        Polymer({
            is: 'student-list',
            properties:{
                active:{
                    type:String
                },
                data:{
                    type:Array,
                    value:[],
                    notify:true
                }
            },
            computeFilter:function(string){
                if (!string) {
                    return null;
                } else {
                    return function(row) {
                        if(string=="join"){
                            console.log(row);
                            return (row.check == false) || (typeof row.check == "undefined")
                        }else{
                            return (row.check == true)
                        }
                        
                    };
                }
            },
            controller:function(e){
                switch (this.active) {
                    case 'join':
                        e.currentTarget.item.check = true;
                        break;
                    case 'cancel':
                        e.currentTarget.item.check = false;
                        break;
                    default:
                        break;
                }
                this.data = [].concat(this.data);
            },
            getValue:function(){
                this.data.map((item)=>{
                    if(typeof item.check == 'undefined'){
                        item.check = false;
                    }
                    return item.check 
                })
                var data = this.data.filter((item)=>{
                    return item.check == true;
                })
                var newData = data.map((item)=>{
                    return item.id;
                })
                return newData;
            }
        });
    </script>
</dom-module>